# Phase 4 機能拡張仕様案（Draft）

**目的**: 本文は、既存の「1端末＝1キャラ」という制約による飽きを防ぎ、コレクション要素およびソーシャル（非同期対戦）要素を取り入れることで、ゲームの長期的なモチベーションと収益性を向上させるためのPhase 4以降の仕様案です。
※現在VPS側で進行中の開発（Phase 3）と競合しない設計とするため、CLAUDE.mdとは別のファイルとして管理しています。

---

## 1. エミュレートガチャ（仮想スペック生成システム）
自分以外のキャラクターを獲得・育成するためのメインとなるハクスラ・コレクション要素。

* **概要**: ゲーム内通貨（バトル勝利報酬）や課金アイテムを消費して、「過去の名機」や「架空の最新端末」のスペック（エミュレートカード）を引くシステム。
* **データ構造例**: 
  * `[N] ガラケー 2007 (HP激低・謎の固有スキル)`
  * `[SR] 初期型スマートフォン (2008)`
  * `[SSR] 未来の量子スマホ 2050`
* **必要な実装**:
  * `EmulatedDevice` モデルの作成（従来のデバイス情報モデルを継承・拡張）
  * ガチャ演出ロジックと確率テーブル
  * 所持キャラクターのインベントリ（一覧表示画面）の追加（※Phase 3-2のキャラクター図鑑の仕組みを拡張）

## 2. フレンドスキャン（QR/URLによる非同期対戦）
SNSでのシェアと口コミ効果（バイラル）を誘発するソーシャル要素。

* **概要**: 自分のキャラクターのスペックと育成状態をQRコードや専用URLに変換し、他プレイヤーがそれを読み込むことで、相手の端末に「強敵」として出現し戦う仕組み。
* **メカニクス**:
  * キャラクターデータを圧縮・ハッシュ化し、QRコード内に埋め込む（サーバーを介さず完結する軽量な設計）。
  * 読み込んだキャラクターは「ゲスト」として一時的に保存され、バトル後に評価や報酬が発生する。
* **必要な実装**:
  * `qr_flutter` パッケージなどの導入によるQR生成とカメラ読み取り機能。
  * スキャン成功時のデコードと、敵インスタンスの生成処理。

## 3. 「動的スペック」システム（デイリー環境補正）
毎日ログインする理由を作り、「自分のスマホが生きている」感覚を強調する要素。

* **概要**: 本体スペックという「静的」なデータに加え、プレイする環境によって「動的」にステータスが補正される仕組み。
* **アイデア例**:
  * **バッテリー残量**: 現在実装済みのSPD補正をより強調。
  * **端末の空き容量**: 日々のデータ増減により、最大HPや防御力が微妙に変動。
  * **時間帯・曜日**: 夜間にプレイすると「ダークモード補正」で特定の属性スキルが強化される、など。

## 4. パーツ換装・オーバークロック（カスタマイズ・強化要素）
収益化の柱となる育成アイテムの販売およびハクスラ要素。

* **概要**: キャラクターのベーススペックは固定でも、外装パーツやソフトウェアアップデート（強化アイテム）を適用することで限界突破させる仕組み。
* **アイデア例**:
  * 「冷却用ヒートシンク」パーツを装備すると、毎ターンの自動回復効果が付く。
  * 「オーバークロックパッチ（使い捨て）」を使うと、次の1バトルのみ攻撃力が1.5倍になる。

## 5. AIによるキャラクターフレイバーの動的生成
「ただの数字の羅列」を「愛着が湧くキャラクター」へと昇華させるテキスト生成。

* **概要**: キャラクターを初回生成（またはガチャで取得）した際、取得したスペック情報を元に、Google Gemini API等のLLMを使用して、キャラクターの「二つ名」「性格」「固有のフレーバーテキスト」をバックグラウンドで自動生成する。
* **例**: `Snapdragon 8 Gen 2 / 12GB RAM` → 「二つ名：神速の記憶領域」「性格：冷静沈着だが熱暴走しやすい」など。

---

**[備考]**
これらの機能は、現在VPS上で進んでいる基盤整備（Phase 3のランダム敵生成、コレクション画面等）が完了した後に、それらを拡張・結合する形で実装を進めることを想定しています。
