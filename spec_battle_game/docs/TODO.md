# SPEC BATTLE — TODO

バージョン: 0.1.0
最終更新: 2026-02-22

---

## 状態サマリー
- **完了済み**: 
  - Phase 1 MVP (ドメインモデル、各種画面UI、バトルエンジン本実装)
  - Phase 2 (各種UX演出：ダメージポップアップ、クリティカル、バッテリー連携によるSPD補正、効果音)
  - Phase 3-1 (CPU敵キャラ自動生成: `enemy_generator.dart`)
  - 重大なバグ修正、及びユニットテスト群の追加
- **現在の位置づけ**: バトルロジックや基本UI・演出の基礎が固まり、新たな機能（画面追加）へとフェーズ移行する段階。

---

## 次に実装すべき機能（Phase 3 後半）

### ~~1. キャラクター図鑑・対戦履歴 (Phase 3-2)~~ ✅ 完了
- `CollectionScreen` の実装
- 過去に遭遇・撃破した架空の端末（敵キャラクター）のリスト表示
- `shared_preferences` で対戦成績（勝利数・遭遇リスト等）をデータ永続化

### 2. タイトル画面の追加 (Phase 3-3)
- **概要**: `title_screen.dart` を新設し、アプリ起動時の演出を強化する。
- **作業内容**:
  - `main.dart` の初期ルートをホーム画面からタイトル画面へ変更。
  - タイトルロゴの表示、タップしてスタートするUI設計。
  - 起動時のBGM再生連動。

---

## 将来の拡張・保留中のタスク（Phase 4）

### 3. エミュレートガチャ（仮想スペック生成）
- ゲーム内通貨を用いてランダムなスペックキャラを生成するガチャ機能。

### 4. QR/URLフレンドスキャン対戦
- `qr_flutter` 等を用いてキャラクターデータをQR化し、他端末で読み込んで非同期対戦する機能。

---

## 既知の問題・課題
- **ユニットテスト環境構築エラー**: `flutter test` 実行時に `objective_c` パッケージのネイティブビルドが失敗する（Xcode Command Line Tools のアーキテクチャ不一致問題）。
  - ※テストコード自体は `flutter analyze` を問題なく通過しているため、ローカルマシンの環境設定起因の保留事項。